name: Build Microservices (Spring Boot + Maven)

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Descargar c√≥digo
        uses: actions/checkout@v4

      - name: Configurar Java 21
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'

      - name: Compilar Eureka Server
        run: |
          cd eureka-server
          mvn clean install -DskipTests

      - name: Compilar Gateway
        run: |
          cd gateway
          mvn clean install -DskipTests

      - name: Compilar Alumno Service
        run: |
          cd alumno-service
          mvn clean install -DskipTests

      - name: Compilar Docente Service
        run: |
          cd docente-service
          mvn clean install -DskipTests

      - name: Compilar Cuenta Service
        run: |
          cd cuenta-service
          mvn clean install -DskipTests

      - name: Compilar Curso Service
        run: |
          cd curso-service
          mvn clean install -DskipTests
